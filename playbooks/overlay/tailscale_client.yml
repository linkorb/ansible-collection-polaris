- name: Setup Tailscale
  hosts: polaris_hosts
  tags:
    - polaris.layer.overlay
    - polaris.layer.overlay.tailscale_client
  tasks:
    - name: Setup tailscale client
      include_role:
        name: artis3n.tailscale
      vars:
        tailscale_args: "{{ polaris.tailscale_args|default('') }}"
        # TODO the key should be generated by a headscale instance, as not passed in manually
        tailscale_authkey: "{{ polaris.tailscale_authkey }}"
